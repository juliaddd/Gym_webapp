{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/hk000043/WBT2425_team10/frontend/admin/react/src/app/adminmain/page.js"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { useRouter } from 'next/navigation';\nimport { Search, Filter, Edit, Trash2, Check } from 'lucide-react';\nimport TextField from '@mui/material/TextField';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport 'chart.js/auto';\n\nconst dummyUsers = Array.from({ length: 30 }).map((_, i) => {\n  const role = i % 3 === 0 ? 'admin' : 'user';\n  const subtype = i % 3 === 0 ? 'VIP' : i % 3 === 1 ? 'Standard' : 'Premium';\n  const shortSubtype = subtype === 'VIP' ? 'V' : subtype === 'Standard' ? 'S' : 'P';\n  const name = `${role}${(i + 1).toString().padStart(3, '0')} ${role === 'admin' ? 'A' : shortSubtype}`;\n  return {\n    id: i + 1,\n    name,\n    role,\n    surname: 'Zajaceva',\n    email: `user${i + 1}@example.com`,\n    phone: '+34 11111111',\n    address: 'Av. de Madrid',\n    city: 'Jaen',\n    subtype,\n  };\n});\n\nconst chartData = {\n  labels: ['2019', '2020', '2021', '2022', '2023', '2024', '2025'],\n  datasets: [\n    {\n      label: 'Users per year',\n      backgroundColor: '#33b5aa',\n      borderRadius: 5,\n      data: [5, 10, 15, 20, 30, 45, 60],\n    },\n  ],\n};\n\nconst chartOptions = {\n  responsive: true,\n  plugins: {\n    legend: { display: false },\n  },\n};\n\nexport default function AdminMainPage() {\n  const [selectedUserId, setSelectedUserId] = useState(null);\n  const [showFilter, setShowFilter] = useState(false);\n  const [filterRoles, setFilterRoles] = useState([]);\n  const [filterSubtypes, setFilterSubtypes] = useState([]);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editableUser, setEditableUser] = useState(null);\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n  const router = useRouter();\n\n  const toggleFilter = (filterSetter, value) => {\n    filterSetter((prev) =>\n      prev.includes(value) ? prev.filter((f) => f !== value) : [...prev, value]\n    );\n  };\n\n  const filteredUsers = dummyUsers.filter((user) => {\n    const roleOk = filterRoles.length === 0 || filterRoles.includes(user.role);\n    const subtypeOk = filterSubtypes.length === 0 || filterSubtypes.includes(user.subtype);\n    return roleOk && subtypeOk;\n  });\n\n  const selectedUser = dummyUsers.find((u) => u.id === selectedUserId);\n\n  const handleEdit = () => {\n    setIsEditing(true);\n    setEditableUser({ ...selectedUser });\n  };\n\n  const handleSave = () => {\n    setIsEditing(false);\n  };\n\n  const handleDelete = () => {\n    setShowConfirmDelete(false);\n    setSelectedUserId(null);\n  };\n\n  return (\n    <div className=\"flex h-screen bg-[#fdf9f3] overflow-hidden\">\n      {/* Sidebar */}\n      <div className=\"w-[350px] p-4 border-r border-gray-200 flex flex-col\">\n        <div className=\"relative mb-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Search\"\n            className=\"w-full pl-8 pr-10 py-2 rounded bg-gray-100 text-sm\"\n          />\n          <Search size={16} className=\"absolute left-2 top-2.5 text-gray-400\" />\n          <Filter\n            size={16}\n            className=\"absolute right-2 top-2.5 text-gray-400 cursor-pointer\"\n            onClick={() => setShowFilter(!showFilter)}\n          />\n          {showFilter && (\n            <div className=\"absolute top-10 left-0 w-full bg-white shadow rounded p-3 text-sm z-10\">\n              <div className=\"mb-2 font-semibold\">Role</div>\n              {['admin', 'user'].map((role) => (\n                <div key={role} className=\"flex items-center mb-2\">\n                  <input\n                    type=\"checkbox\"\n                    className=\"mr-2\"\n                    checked={filterRoles.includes(role)}\n                    onChange={() => toggleFilter(setFilterRoles, role)}\n                  />\n                  <label>{role}</label>\n                </div>\n              ))}\n              <div className=\"mt-2 mb-2 font-semibold\">Subscription</div>\n              {['VIP', 'Standard', 'Premium'].map((type) => (\n                <div key={type} className=\"flex items-center mb-2\">\n                  <input\n                    type=\"checkbox\"\n                    className=\"mr-2\"\n                    checked={filterSubtypes.includes(type)}\n                    onChange={() => toggleFilter(setFilterSubtypes, type)}\n                  />\n                  <label>{type}</label>\n                </div>\n              ))}\n              <button\n                onClick={() => {\n                  setFilterRoles([]);\n                  setFilterSubtypes([]);\n                }}\n                className=\"w-full bg-gray-200 text-black rounded py-1 mt-2\"\n              >\n                Clear all\n              </button>\n            </div>\n          )}\n        </div>\n\n        <button\n          onClick={() => router.push('/add-user')}\n          className=\"mb-4 py-2 bg-[#33b5aa] text-white rounded\"\n        >\n          Add user\n        </button>\n\n        <div className=\"overflow-y-auto flex-1 pr-1\">\n          {filteredUsers.map((user) => (\n            <div\n              key={user.id}\n              onClick={() => {\n                setSelectedUserId(user.id);\n                setIsEditing(false);\n              }}\n              className={`flex items-center gap-2 px-2 py-2 mb-1 rounded cursor-pointer ${\n                selectedUserId === user.id ? 'bg-gray-300' : 'bg-gray-200'\n              }`}\n            >\n              <img src=\"/images/user.jpg\" className=\"w-6 h-6 rounded-full\" alt=\"avatar\" />\n              <span className=\"text-sm\">{user.name}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"flex-1 p-4 flex flex-col items-center gap-4\">\n        <div className=\"h-1/4 w-4/5\">\n          <Bar data={chartData} options={chartOptions} />\n          <div className=\"text-center mt-2\">\n            <button\n              className=\"text-blue-500 underline hover:text-blue-700\"\n              onClick={() => router.push('/statistics')}\n            >\n              See full statistics\n            </button>\n          </div>\n        </div>\n\n        {/* User info panel */}\n        <div className=\"h-4/5 w-full max-w-5xl bg-gray-100 p-4 rounded-xl shadow\">\n          {!selectedUser ? (\n            <div className=\"h-full flex items-center justify-center text-gray-500\">\n              Select a user for more\n            </div>\n          ) : (\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"flex justify-between items-start\">\n                <img src=\"/images/user.jpg\" alt=\"Avatar\" className=\"w-20 h-20 rounded-full\" />\n                <div className=\"flex gap-2 items-center\">\n                  {isEditing ? (\n                    <Check onClick={handleSave} className=\"cursor-pointer\" />\n                  ) : (\n                    <Edit onClick={handleEdit} className=\"cursor-pointer\" />\n                  )}\n                  <Trash2 onClick={() => setShowConfirmDelete(true)} className=\"cursor-pointer\" />\n                </div>\n              </div>\n\n              {showConfirmDelete && (\n                <div className=\"bg-red-100 p-2 rounded text-red-700\">\n                  <div className=\"flex justify-between items-center\">\n                    <span>Are you sure you want to delete this user?</span>\n                    <div className=\"flex gap-2\">\n                      <button onClick={handleDelete} className=\"text-sm bg-red-500 text-white px-2 rounded\">Yes</button>\n                      <button onClick={() => setShowConfirmDelete(false)} className=\"text-sm bg-gray-300 px-2 rounded\">No</button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                {['name', 'surname', 'email', 'phone', 'id', 'address', 'city'].map((field) => (\n                  <TextField\n                    key={field}\n                    fullWidth\n                    variant=\"outlined\"\n                    label={field}\n                    value={editableUser?.[field] || selectedUser[field]}\n                    onChange={(e) =>\n                      setEditableUser((prev) => ({ ...prev, [field]: e.target.value }))\n                    }\n                    disabled={!isEditing}\n                  />\n                ))}\n\n                <FormControl fullWidth variant=\"outlined\" disabled={!isEditing}>\n                  <InputLabel>Sub type</InputLabel>\n                  <Select\n                    value={editableUser?.subtype || selectedUser.subtype}\n                    onChange={(e) =>\n                      setEditableUser((prev) => ({ ...prev, subtype: e.target.value }))\n                    }\n                    label=\"Sub type\"\n                  >\n                    {['VIP', 'Standard', 'Premium'].map((type) => (\n                      <MenuItem key={type} value={type}>\n                        {type}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}